<div class="equipment-container">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-content">
      <div class="header-left">
        <h1 class="page-title">
          <mat-icon class="title-icon">build</mat-icon>
          Qu·∫£n L√Ω Thi·∫øt B·ªã
        </h1>
        <p class="page-subtitle">Qu·∫£n l√Ω v√† theo d√µi t·∫•t c·∫£ thi·∫øt b·ªã trong h·ªá th·ªëng</p>
      </div>
      <div class="header-actions">
        <button mat-raised-button color="primary" class="add-btn" (click)="goAdd()">
          <mat-icon>add_a_photo</mat-icon>
          Th√™m B·∫±ng ·∫¢nh
        </button>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Stats Cards -->
    <div class="stats-section" *ngIf="items.length">
      <div class="stat-card">
        <div class="stat-icon">‚öôÔ∏è</div>
        <div class="stat-content">
          <h3 class="stat-number">{{ items.length }}</h3>
          <p class="stat-label">T·ªïng Thi·∫øt B·ªã</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üì∏</div>
        <div class="stat-content">
          <h3 class="stat-number">{{ getItemsWithImages() }}</h3>
          <p class="stat-label">C√≥ H√¨nh ·∫¢nh</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üè∑Ô∏è</div>
        <div class="stat-content">
          <h3 class="stat-number">{{ getUniqueCategories() }}</h3>
          <p class="stat-label">Danh M·ª•c</p>
        </div>
      </div>
    </div>

    <!-- Equipment List -->
    <div class="equipment-list" *ngIf="items.length">
      <div class="equipment-card" *ngFor="let item of items; trackBy: trackByEquipmentId">
        <div class="equipment-image">
          <img 
            *ngIf="item.images?.length && isValidImageUrl(item.images[0])" 
            [src]="item.images[0]" 
            [alt]="item.name"
            (error)="onImageError($event, item)"
            (click)="openImageModal(item)"
            class="equipment-img clickable"
          />
          <div *ngIf="!item.images?.length || !isValidImageUrl(item.images?.[0])" class="no-image">
            <mat-icon>image</mat-icon>
            <span>{{ !item.images?.length ? 'Ch∆∞a c√≥ h√¨nh' : 'L·ªói t·∫£i ·∫£nh' }}</span>
          </div>
          <div class="image-overlay" *ngIf="item.images?.length > 1">
            <span class="image-count">+{{ item.images.length - 1 }}</span>
          </div>
        </div>
        
        <div class="equipment-content">
          <div class="equipment-header">
            <h3 class="equipment-name">{{ item.name }}</h3>
            <div class="equipment-status">
              <span class="status-badge active">Ho·∫°t ƒë·ªông</span>
            </div>
          </div>

          <div class="equipment-meta">
            <div class="meta-item">
              <mat-icon>category</mat-icon>
              <span>{{ item.category || 'Ch∆∞a ph√¢n lo·∫°i' }}</span>
            </div>
            <div class="meta-item">
              <mat-icon>business</mat-icon>
              <span>{{ item.brand || 'Ch∆∞a c√≥ th∆∞∆°ng hi·ªáu' }}</span>
            </div>
            <div class="meta-item" *ngIf="item.description">
              <mat-icon>description</mat-icon>
              <span>{{ item.description }}</span>
            </div>
          </div>

          <div class="equipment-actions">
            <button mat-stroked-button color="primary" class="action-btn">
              <mat-icon>visibility</mat-icon>
              Xem Chi Ti·∫øt
            </button>
            <button mat-stroked-button color="accent" class="action-btn">
              <mat-icon>edit</mat-icon>
              Ch·ªânh S·ª≠a
            </button>
            <button mat-stroked-button color="warn" class="action-btn">
              <mat-icon>delete</mat-icon>
              X√≥a
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="!items.length && !loading">
      <div class="empty-icon">‚öôÔ∏è</div>
      <h3 class="empty-title">Ch∆∞a c√≥ thi·∫øt b·ªã n√†o</h3>
      <p class="empty-description">
        B·∫Øt ƒë·∫ßu b·∫±ng c√°ch th√™m thi·∫øt b·ªã ƒë·∫ßu ti√™n ƒë·ªÉ qu·∫£n l√Ω h·ªá th·ªëng
      </p>
      <button mat-raised-button color="primary" class="empty-action" (click)="goAdd()">
        <mat-icon>add_a_photo</mat-icon>
        Th√™m Thi·∫øt B·ªã ƒê·∫ßu Ti√™n
      </button>
    </div>

    <!-- Loading State -->
    <div class="loading-state" *ngIf="loading">
      <mat-spinner diameter="50"></mat-spinner>
      <p class="loading-text">ƒêang t·∫£i danh s√°ch thi·∫øt b·ªã...</p>
    </div>
  </div>
</div>
